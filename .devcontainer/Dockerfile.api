FROM swift:6.1-jammy

RUN apt-get update && apt-get install -y --no-install-recommends \
    git pkg-config libpq5 libpq-dev libssl-dev tzdata \
 && rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

COPY api/Package.swift ./api/
RUN cd api && swift package resolve

COPY . .

EXPOSE 8080
